import { Head, Appear } from "mdx-deck";
import { Invert } from "mdx-deck/layouts";

export { default as theme } from "../../theme";

<Head>
  <title>Typed JavaScript 101</title>
</Head>

# Typed JavaScript

> what & why?

---

# Types

```js
{
  name: 'Jim',
  age: 29,
  beard: true,
  skills: [
    'Programming',
    'Teaching',
    /* TODO: Get some hobbies */
  ]
}
```

---

JavaScript has

# Dynamic Types

---

# Dynamic Types

```js
let age = 29;

age = "29";
```

---

# Dynamic Types

```js
function sum(a, b) {
  return a + b;
}

sum("13", "37");
```

---

# Why is this a problem?

---

> We don't know if our code will work _until we run\* it_

\*This includes unit tests. They actually _run_ your code.

---

# Static Analysis

```js
// ES6 JavaScript
const double = x => x * 2;
```

```haskell
-- Haskell
double x = x * 2
```

---

```js
// ES6 JavaScript
double("trouble");
```

```haskell
-- Haskell
double "trouble"
```

---

```js
5 == true;
```

```haskell
5 == True
```

```notes
Pause before next slide
Ask why we can't analyse JS staticly?
We don't have type information because no inherent restrictions
```

---

# We can do better than `eslint ./src --fix`

---

# What if...?

---

```js
function double(x: number): number {
  return x * 2;
}
```

```js
const double = (x: number): number => x * 2;
```

---

# Typed JavaScript

<Appear>
  <h3>
    TypeScript <em>(Microsoft)</em>
  </h3>
  <h3>
    Flowtype <em>(Facebook)</em>
  </h3>
</Appear>

---

# Comparison

<table width="100%">
  <thead>
    <tr>
      <th>&nbsp;</th>
      <th>TypeScript</th>
      <th>Flowtype</th>
    </tr>
  </thead>
  <tbody>
    <Appear>
      <tr>
        <td>Editor support</td>
        <td>Amazing</td>
        <td>Adequate</td>
      </tr>
      <tr>
        <td>Error messages</td>
        <td>Incomprehensible&nbsp;&nbsp;</td>
        <td>Weirdly vague</td>
      </tr>
      <tr>
        <td>On new projects</td>
        <td>Great</td>
        <td>Great</td>
      </tr>
      <tr>
        <td>On existing projects&nbsp;&nbsp;</td>
        <td>Painful</td>
        <td>Great</td>
      </tr>
      <tr>
        <td>Transpilation</td>
        <td>
          <code>tsc</code>
        </td>
        <td>Babel Plugin</td>
      </tr>
    </Appear>
  </tbody>
</table>

```notes
Left deliberately vague to illustrate that it's hard to compare
SYNTAX IS BASICALLY THE SAME
Note that you can use flow without any transpilation
```

---

# Disclaimer

I have never used TypeScript.

```notes
but I've used flowtype a lot
also the thesis
```

---

> Adding type definitions to JavaScript
> helps catch many more bugs
> through static analysis.

---

> Adding type definitions to JavaScript
> ~~helps catch many more bugs through static analysis~~
> makes programming _easier_.

---

# ¢¢

<Appear>
  <p>
    <s>Lazier</s> Easier than writing unit tests
  </p>
  <p>Documents your code</p>
  <p>
    Lets you <b>write</b> your code <b>faster</b>
  </p>
  <p>
    Makes your code <b>run faster</b>
  </p>
</Appear>

```notes
Just like unit testing, except easier to do
Makes you think about your code
Write code faster
Makes your code run faster
```

---

# Wait, what, faster?

```notes
We have to go a little deeper
```

---

# [insert rabbithole here]

```notes
Explain what V8 is
"When Chrome (or Node) runs your code..."
Essentially a VM
```

---

# [insert ~~rabbit~~badgerhole here]

```notes
Explain what a VM is
Explain why it's slow
Explain JIT
```

---

# [insert ~~rabbitbadgerhole~~ EVIDENCE OF ANCIENT RABBIT CIVILISATION here]

```notes
Functions get hot
New types throw a spanner in the works
```

---

# Oh look, sunlight!

```notes
Typed JS encourages you to use types responsibly
Better, faster, stronger code
```

---

# Questions

(About _anything_)

---

# Jim O'Brien

@jimcodes

spicy.engineering
